# Документ требований: Интеграция фриланс-платформ

## Введение

Данный документ определяет требования к интеграции фриланс-платформ (Kwork.ru, FL.ru, Weblancer.net и др.) в платформу автоматизации рекрутинга QBS. В отличие от существующей интеграции с HeadHunter, фриланс-платформы обычно не предоставляют официальных API, что требует другого подхода, основанного на AI-скрининге через ссылки на интервью и ручном импорте откликов.

## Глоссарий

- **QBS**: Quick Background Screening - платформа автоматизации рекрутинга
- **Фриланс_Платформа**: Любая фриланс-площадка (Kwork.ru, FL.ru, Weblancer.net, Upwork и т.д.)
- **Работодатель**: Пользователь, который публикует задания на фриланс-платформах и использует QBS для отбора кандидатов
- **Фрилансер**: Человек, который откликается на задания на фриланс-платформах (эквивалент "кандидата" в контексте HH)
- **Отклик**: Заявка фрилансера на задание
- **AI_Интервью**: Автоматизированное интервью, проводимое через систему QBS
- **Ссылка_На_Интервью**: Уникальный URL, сгенерированный QBS для прохождения AI-интервью фрилансерами
- **Шортлист**: Отфильтрованный список лучших кандидатов после AI-скрининга
- **Задание**: Задача/проект, опубликованный работодателем на фриланс-платформе
- **Ручной_Импорт**: Процесс копирования данных откликов с фриланс-платформы в QBS
- **Авто_Парсер**: Опциональная автоматизированная система для извлечения данных откликов из текста
- **Источник_Платформы**: Идентификатор фриланс-платформы (kwork, fl, weblancer и т.д.)

## Требования

### Требование 1: Генерация ссылок на интервью

**Пользовательская история:** Как работодатель, я хочу генерировать уникальные ссылки на AI-интервью для моих заданий на фриланс-платформах, чтобы я мог последовательно отбирать фрилансеров.

#### Критерии приемки

1. КОГДА работодатель создаёт задание в QBS, ТО Система ДОЛЖНА сгенерировать уникальную ссылку на интервью
2. КОГДА генерируется ссылка на интервью, ТО Система ДОЛЖНА связать её с конкретным заданием
3. Ссылка_На_Интервью ДОЛЖНА оставаться действительной до тех пор, пока задание не будет закрыто или архивировано
4. КОГДА работодатель просматривает задание, ТО Система ДОЛЖНА отображать ссылку на интервью на видном месте
5. Система ДОЛЖНА предоставлять функцию копирования ссылки на интервью в буфер обмена

### Требование 2: Распространение ссылок на интервью

**Пользовательская история:** Как работодатель, я хочу делиться ссылками на интервью с фрилансерами с любой платформы, чтобы они могли пройти процесс AI-скрининга.

#### Критерии приемки

1. Работодатель ДОЛЖЕН иметь возможность включить ссылку на интервью в описание задания на фриланс-платформе
2. Работодатель ДОЛЖЕН иметь возможность отправить ссылку на интервью через личные сообщения платформы
3. КОГДА фрилансер переходит по ссылке на интервью, ТО Система ДОЛЖНА отобразить целевую страницу с инструкциями по интервью
4. Система ДОЛЖНА предоставлять шаблонный текст для работодателей для использования при размещении ссылок на фриланс-платформах
5. Шаблонный_Текст ДОЛЖЕН объяснять цель AI-интервью и примерное время прохождения

### Требование 3: Опыт прохождения интервью фрилансером

**Пользовательская история:** Как фрилансер, я хочу пройти AI-интервью через веб-чат в реальном времени, чтобы меня рассмотрели на задание.

#### Критерии приемки

1. КОГДА фрилансер переходит по ссылке на интервью, ТО Система ДОЛЖНА проверить, что ссылка действительна и активна
2. ЕСЛИ ссылка недействительна или истекла, ТО Система ДОЛЖНА отобразить соответствующее сообщение об ошибке
3. КОГДА начинается интервью, ТО Система ДОЛЖНА собрать базовую информацию о фрилансере:
   - Имя (обязательно)
   - Email (обязательно)
   - **URL профиля на платформе (обязательно)** - например: kwork.ru/user/username, fl.ru/users/username/, weblancer.net/users/username/
   - Телефон (опционально)
   - Telegram username (опционально)
4. Система ДОЛЖНА валидировать URL профиля на платформе (проверка формата для известных платформ)
5. Система ДОЛЖНА создать запись `vacancy_response` с `importSource: 'FREELANCE_LINK'` и `platformProfileUrl`
6. Система ДОЛЖНА проверить дубликаты по `platformProfileUrl` + `vacancyId` перед созданием отклика
7. Система ДОЛЖНА проводить интервью через веб-чат в реальном времени, используя тот же AI-движок, что и интеграция с HeadHunter
8. КОГДА фрилансер отправляет сообщение, ТО Система ДОЛЖНА отобразить индикатор "бот печатает..." и доставить ответ в течение 5 секунд
9. КОГДА интервью завершено, ТО Система ДОЛЖНА отобразить подтверждающее сообщение в чате
10. Система ДОЛЖНА позволять фрилансерам проходить интервью на мобильных устройствах
11. Система ДОЛЖНА сохранять историю чата и позволять возобновить интервью при перезагрузке страницы
12. Интервью ДОЛЖНО поддерживать текстовые сообщения (голосовые сообщения - будущая функциональность)

### Требование 4: Ручной импорт откликов

**Пользовательская история:** Как работодатель, я хочу вручную импортировать отклики фрилансеров с любой платформы, чтобы QBS мог проанализировать их и пригласить фрилансеров на интервью.

#### Критерии приемки

1. Система ДОЛЖНА предоставлять форму для импорта данных откликов фрилансеров
2. КОГДА импортируется отклик, ТО Работодатель ДОЛЖЕН предоставить имя фрилансера, контактную информацию и текст отклика
3. Система ДОЛЖНА проверить, что все обязательные поля заполнены перед принятием импорта
4. КОГДА отклик импортирован, ТО Система ДОЛЖНА связать его с правильным заданием
5. Система ДОЛЖНА сохранять оригинальный текст отклика для AI-анализа
6. Система ДОЛЖНА предотвращать дублирование импорта одного и того же фрилансера для одного и того же задания
7. КОГДА импорт успешен, ТО Система ДОЛЖНА отобразить подтверждающее сообщение

### Требование 5: Автоматизированный парсинг откликов

**Пользовательская история:** Как работодатель, я хочу вставить несколько откликов одновременно, чтобы я мог быстро импортировать много фрилансеров без ручного ввода данных.

#### Критерии приемки

1. Система ДОЛЖНА предоставлять интерфейс массового импорта, принимающий многострочный текст
2. КОГДА текст вставлен, ТО Авто_Парсер ДОЛЖЕН попытаться идентифицировать отдельные отклики
3. Авто_Парсер ДОЛЖЕН извлекать имена фрилансеров, контактную информацию и текст откликов
4. КОГДА парсинг неоднозначен, ТО Система ДОЛЖНА выделить неопределённые поля для ручной проверки
5. Система ДОЛЖНА отображать предварительный просмотр распарсенных данных перед окончательным импортом
6. Работодатель ДОЛЖЕН иметь возможность редактировать распарсенные данные перед подтверждением импорта
7. КОГДА массовый импорт завершён, ТО Система ДОЛЖНА сообщить количество успешных импортов и любые ошибки

### Требование 6: AI-анализ откликов фрилансеров

**Пользовательская история:** Как работодатель, я хочу, чтобы QBS анализировал отклики фрилансеров с помощью AI, чтобы я мог определить наиболее подходящих кандидатов.

#### Критерии приемки

1. КОГДА отклик импортирован, ТО Система ДОЛЖНА автоматически запустить AI-анализ
2. AI_Анализатор ДОЛЖЕН оценить отклик относительно требований задания
3. AI_Анализатор ДОЛЖЕН извлечь ключевые навыки, опыт и квалификацию
4. AI_Анализатор ДОЛЖЕН сгенерировать оценку совместимости (0-100)
5. Система ДОЛЖНА сохранить результаты анализа вместе с откликом фрилансера
6. КОГДА анализ не удаётся, ТО Система ДОЛЖНА записать ошибку в лог и позволить ручную повторную попытку

### Требование 7: Автоматическое приглашение на интервью

**Пользовательская история:** Как работодатель, я хочу, чтобы QBS автоматически приглашал квалифицированных фрилансеров на AI-интервью, чтобы мне не приходилось вручную отправлять сообщения каждому.

#### Критерии приемки

1. КОГДА отклик проанализирован, ТО Система ДОЛЖНА определить, соответствует ли фрилансер минимальным требованиям
2. ЕСЛИ фрилансер квалифицирован, ТО Система ДОЛЖНА сгенерировать персонализированное приглашение на интервью
3. Приглашение ДОЛЖНО включать ссылку на интервью и инструкции
4. Система ДОЛЖНА предоставить текст приглашения для отправки работодателем через сообщения платформы
5. Система ДОЛЖНА отслеживать, какие фрилансеры были приглашены
6. Система ДОЛЖНА позволять работодателям настраивать шаблоны приглашений для каждого задания

### Требование 8: Генерация шортлиста

**Пользовательская история:** Как работодатель, я хочу видеть ранжированный шортлист фрилансеров, прошедших интервью, чтобы я мог быстро определить лучших кандидатов.

#### Критерии приемки

1. КОГДА фрилансеры завершают интервью, ТО Система ДОЛЖНА рассчитать общие оценки
2. Система ДОЛЖНА ранжировать фрилансеров по комбинированной оценке (анализ отклика + результаты интервью)
3. Шортлист ДОЛЖЕН отображать лучших кандидатов с ключевыми особенностями
4. Работодатель ДОЛЖЕН иметь возможность фильтровать шортлист по минимальному порогу оценки
5. Система ДОЛЖНА показывать сравнение квалификаций фрилансеров бок о бок
6. Работодатель ДОЛЖЕН иметь возможность экспортировать данные шортлиста в CSV или PDF

### Требование 9: Управление вакансиями

**Пользовательская история:** Как работодатель, я хочу создавать вакансии вручную для фриланс-платформ и управлять всеми вакансиями (HH.ru + фриланс) в QBS, чтобы я мог отслеживать все действия по отбору в одном месте.

#### Критерии приемки

1. Система ДОЛЖНА позволять работодателям создавать вакансии вручную для любой фриланс-платформы
2. КОГДА создаётся вакансия вручную, ТО Работодатель ДОЛЖЕН предоставить:
   - Название вакансии (обязательно)
   - Описание (обязательно)
   - Требования (обязательно)
   - Источник платформы: kwork, fl, weblancer, upwork, custom (обязательно)
   - URL вакансии на платформе (опционально)
3. КОГДА вакансия создана, ТО Система ДОЛЖНА автоматически сгенерировать уникальную ссылку на интервью
4. Система ДОЛЖНА отображать все вакансии (из HH.ru + созданные вручную) в едином списке
5. Система ДОЛЖНА отображать статистику по источникам откликов:
   - Отклики, спарсенные с HH.ru (`importSource: 'HH_API'`)
   - Отклики, импортированные вручную (`importSource: 'FREELANCE_MANUAL'`)
   - Отклики по прямой ссылке (`importSource: 'FREELANCE_LINK'`)
   - Завершённые интервью
   - Размер шортлиста
6. Работодатель ДОЛЖЕН иметь возможность помечать вакансии как активные, приостановленные или закрытые
7. КОГДА вакансия закрыта, ТО Система ДОЛЖНА деактивировать ссылку на интервью (показывать сообщение "Вакансия закрыта")
8. Работодатель ДОЛЖЕН иметь возможность фильтровать вакансии по источнику (HH.ru, Kwork, FL.ru, Weblancer и т.д.)

### Требование 10: Дашборд статуса интеграции

**Пользовательская история:** Как работодатель, я хочу видеть обзор активности интеграции с фриланс-платформами, чтобы я мог отслеживать воронку отбора.

#### Критерии приемки

1. Система ДОЛЖНА предоставлять дашборд, показывающий все задания на фриланс-платформах
2. Дашборд ДОЛЖЕН отображать ключевые метрики: импортированные отклики, отправленные интервью, завершённые интервью, размер шортлиста
3. Дашборд ДОЛЖЕН показывать коэффициенты конверсии на каждом этапе воронки
4. Дашборд ДОЛЖЕН выделять задания, требующие внимания (например, много откликов ожидают импорта)
5. Работодатель ДОЛЖЕН иметь возможность фильтровать дашборд по диапазону дат, статусу задания и источнику платформы

### Требование 11: Система уведомлений

**Пользовательская история:** Как работодатель, я хочу получать уведомления о действиях по отбору на фриланс-платформах, чтобы я мог оперативно реагировать на важные события.

#### Критерии приемки

1. КОГДА фрилансер завершает интервью, ТО Система ДОЛЖНА уведомить работодателя
2. КОГДА выявлен высокооценённый кандидат, ТО Система ДОЛЖНА отправить приоритетное уведомление
3. Работодатель ДОЛЖЕН иметь возможность настроить предпочтения уведомлений (email, в приложении, Telegram)
4. Система ДОЛЖНА группировать уведомления, чтобы не перегружать работодателя
5. Уведомление ДОЛЖНО включать прямую ссылку на соответствующий профиль фрилансера

### Требование 12: Конфиденциальность и безопасность данных

**Пользовательская история:** Как системный администратор, я хочу обеспечить безопасную обработку данных фрилансеров, чтобы мы соблюдали правила конфиденциальности.

#### Критерии приемки

1. Система ДОЛЖНА шифровать персональные данные фрилансеров в состоянии покоя
2. Система ДОЛЖНА использовать HTTPS для всех коммуникаций по ссылкам на интервью
3. Система НЕ ДОЛЖНА хранить пароли или токены аутентификации фриланс-платформ
4. КОГДА задание удалено, ТО Система ДОЛЖНА предложить анонимизировать или удалить связанные данные фрилансеров
5. Система ДОЛЖНА логировать все обращения к персональной информации фрилансеров

### Требование 13: Мобильная адаптивность

**Пользовательская история:** Как работодатель, я хочу управлять интеграцией с фриланс-платформами с моего мобильного устройства, чтобы я мог работать в дороге.

#### Критерии приемки

1. Целевая страница Ссылки_На_Интервью ДОЛЖНА быть полностью адаптивной на мобильных устройствах
2. Форма ручного импорта ДОЛЖНА быть удобной для использования на мобильных экранах
3. Вид шортлиста ДОЛЖЕН адаптироваться к мобильному макету без горизонтальной прокрутки
4. Система ДОЛЖНА поддерживать сенсорные жесты для общих действий
5. Мобильный интерфейс ДОЛЖЕН загружаться в течение 3 секунд при 4G-соединении

### Требование 14: Обработка ошибок и восстановление

**Пользовательская история:** Как работодатель, я хочу получать понятные сообщения об ошибках, когда что-то идёт не так, чтобы я мог быстро решить проблемы.

#### Критерии приемки

1. КОГДА ссылка на интервью недействительна, ТО Система ДОЛЖНА отобразить понятное пользователю сообщение об ошибке
2. КОГДА AI-анализ не удаётся, ТО Система ДОЛЖНА позволить ручную повторную попытку с деталями ошибки
3. КОГДА массовый импорт содержит ошибки, ТО Система ДОЛЖНА показать, какие записи не удались и почему
4. Система ДОЛЖНА предоставлять справочную документацию для распространённых сценариев ошибок
5. КОГДА происходит критическая ошибка, ТО Система ДОЛЖНА автоматически уведомить администраторов

### Требование 15: Аналитика и отчётность

**Пользовательская история:** Как работодатель, я хочу анализировать эффективность процесса отбора на фриланс-платформах, чтобы я мог оптимизировать свою стратегию найма.

#### Критерии приемки

1. Система ДОЛЖНА отслеживать время до формирования шортлиста для каждого задания
2. Система ДОЛЖНА рассчитывать коэффициент завершения интервью (приглашённые vs завершённые)
3. Система ДОЛЖНА показывать распределение оценок кандидатов
4. Система ДОЛЖНА сравнивать метрики производительности между различными фриланс-платформами (Kwork vs FL.ru vs Weblancer и т.д.)
5. Система ДОЛЖНА сравнивать метрики фриланс-платформ с интеграцией HeadHunter
6. Работодатель ДОЛЖЕН иметь возможность экспортировать аналитические данные для внешнего анализа
