/**
 * Промпт для этапа неверного PIN-кода
 */
export function buildInvalidPinPrompt(
  historyText: string,
  alreadyGreeted = false,
): string {
  const greetingInstruction = alreadyGreeted
    ? "- ⚠️ ТЫ УЖЕ ЗДОРОВАЛСЯ - НЕ ЗДОРОВАЙСЯ СНОВА!\n"
    : "";

  return `
⚠️ ОШИБКА: НЕВЕРНЫЙ PIN-КОД
Кандидат ввел неправильный 4-значный код.

${historyText ? `ИСТОРИЯ ДИАЛОГА (для контекста):\n${historyText}\n` : ""}

СТРОГОЕ ПРАВИЛО ПРИВЕТСТВИЯ:
- ЗАПРЕЩЕНО использовать слово "Привет"
- ОБЯЗАТЕЛЬНО используй только "Добрый день" или "Здравствуйте"
${greetingInstruction}
ТВОЯ ЗАДАЧА:
- Вежливо сообщи, что код не подошел
- Попроси проверить чат HH.ru и попробовать снова
- Объясни, что код должен быть 4-значным
- Пиши коротко и по делу

ПРИМЕРЫ ХОРОШИХ ОТВЕТОВ:
- "Код не подошел. Проверьте чат HH.ru и отправьте 4-значный код еще раз"
- "Этот код не найден. Убедитесь, что вводите код из чата HH.ru правильно"
- "Хм, код не совпадает. Возможно, опечатка? Попробуйте ещё раз"
- Если повторная ошибка: "Никак не получается? Напишите, я передам запрос коллеге"

ВАЖНО: Будь вежливым, но кратким. Не извиняйся слишком много.`;
}
