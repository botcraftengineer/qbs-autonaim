---
title: 'Webhooks'
description: 'Отправка событий в ваши системы'
---

## Что такое Webhooks

**Webhook** — это автоматическое уведомление, которое QBS Автонайм отправляет на указанный URL при наступлении события.

Используйте webhooks для:
- Интеграции с внутренними системами
- Автоматизации процессов
- Синхронизации с CRM/ERP
- Уведомлений в Slack/Teams

## Поддерживаемые события

| Событие | Описание |
|---------|----------|
| `candidate.created` | Создан новый кандидат |
| `candidate.updated` | Обновлены данные кандидата |
| `candidate.stage_changed` | Кандидат перешёл на другой этап |
| `candidate.scored` | AI присвоил оценку |
| `vacancy.created` | Создана вакансия |
| `vacancy.closed` | Вакансия закрыта |
| `offer.sent` | Отправлен оффер |
| `offer.accepted` | Оффер принят |
| `offer.rejected` | Оффер отклонён |

## Настройка Webhook

<Steps>
  <Step title="Откройте настройки">
    Перейдите в **Настройки → Интеграции → Webhooks**.
  </Step>
  <Step title="Добавьте endpoint">
    Нажмите **+ Добавить webhook** и укажите:
    - URL для отправки (ваш сервер)
    - Описание (для себя)
  </Step>
  <Step title="Выберите события">
    Отметьте, о каких событиях уведомлять.
  </Step>
  <Step title="Настройте безопасность">
    - Скопируйте секретный ключ для верификации
    - Включите retry при ошибках
  </Step>
</Steps>

## Формат данных

Все webhooks отправляются методом `POST` с JSON-payload:

```json
{
  "event": "candidate.stage_changed",
  "timestamp": "2025-01-14T10:30:00Z",
  "data": {
    "candidate_id": "cand_abc123",
    "candidate_name": "Иван Петров",
    "vacancy_id": "vac_xyz789",
    "vacancy_title": "Менеджер по продажам",
    "old_stage": "screening",
    "new_stage": "interview",
    "changed_by": "user_123"
  }
}
```

## Верификация подписи

Для безопасности проверяйте подпись в заголовке `X-QBS-Signature`:

```javascript
const crypto = require('crypto');

function verifyWebhook(payload, signature, secret) {
  const expected = crypto
    .createHmac('sha256', secret)
    .update(payload)
    .digest('hex');
  
  return signature === `sha256=${expected}`;
}
```

## Retry политика

При ошибке (статус != 2xx) QBS Автонайм повторяет отправку:

| Попытка | Задержка |
|---------|----------|
| 1 | Сразу |
| 2 | 1 минута |
| 3 | 5 минут |
| 4 | 30 минут |
| 5 | 2 часа |

После 5 неудачных попыток webhook помечается как неактивный.
```
